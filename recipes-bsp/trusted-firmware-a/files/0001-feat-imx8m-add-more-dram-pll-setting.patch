From d9901d1684634f03fcb5a9c1be82911e28e72f95 Mon Sep 17 00:00:00 2001
From: Marek Vasut <marex@denx.de>
Date: Thu, 31 Aug 2023 02:59:08 +0200
Subject: [PATCH 1/2] feat(imx8m): add more dram pll setting

Add DRAM PLL frequency setting for 3732mts & 3733mts.

Upstream-Status: Backport [89474044a59d74cc088eb09292e99a3ca623fe33]
Signed-off-by: Marek Vasut <marex@denx.de>
---
 plat/imx/imx8m/ddr/clock.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/plat/imx/imx8m/ddr/clock.c b/plat/imx/imx8m/ddr/clock.c
index 8b132d231..31f2f560e 100644
--- a/plat/imx/imx8m/ddr/clock.c
+++ b/plat/imx/imx8m/ddr/clock.c
@@ -91,6 +91,10 @@ void dram_pll_init(unsigned int drate)
 	case 4000:
 		mmio_write_32(DRAM_PLL_CTRL + 0x4, (250 << 12) | (3 << 4) | 1);
 		break;
+	case 3733:
+	case 3732:
+		mmio_write_32(DRAM_PLL_CTRL + 0x4, (311 << 12) | (4 << 4) | 1);
+		break;
 	case 3200:
 		mmio_write_32(DRAM_PLL_CTRL + 0x4, (200 << 12) | (3 << 4) | 1);
 		break;
-- 
2.40.1

